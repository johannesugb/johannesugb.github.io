---
title: "JavaScript Test"
# last_modified_at: 2021-03-02T19:00:00+01:00
categories:
#  - Vulkan
tags:
#  - Vulkan
#  - synchronization
# header:
#   image: /assets/images/1500x500.jpg
---

<h1 style="color:green;">
    GeeksForGeeks
</h1>

<p> 
    <!-- Making a text input -->
    <input type="number" step="any" id="inputVal" placeholder="Float" /> 
          
    <!-- Button to send data -->
    <button id="sendButton" onclick="sendJSON()">Send JSON</button> 
  
  
    <!-- For printing result from server -->
    <p class="result" style="color:green"></p>   
    
    <div>
      <canvas id="myChart"></canvas>
   </div>
</p>

<script>
function sendJSON(){ 

			let inputVal = document.getElementById("inputVal").value;
			// Validate inputVal 
			var patternForInputVal=/^-?(\d+(\.\d+)?|\.\d+)$/;
			if (!patternForInputVal.test(inputVal)) {
				alert("Invalid number in textbox: " + inputVal);
				return;
			}
		
			let result = document.getElementById("resultBox");
			let name = document.querySelector('#name'); 
			let email = document.querySelector('#email'); 
			
			// Creating a XHR object 
			let xhr = new XMLHttpRequest(); 
			let url = "https://godbolt.org/api/compiler/g63/compile"; 
		
			// open a connection 
			xhr.open("POST", url, true); 

			// Set the request header i.e. which type of content you are sending 
			xhr.setRequestHeader("Content-Type", "application/json"); 

			// Create a state change callback 
			xhr.onreadystatechange = function () { 
			
				document.getElementById("sendButton").disabled=false;
			
				if (xhr.readyState === 4 && xhr.status === 200) { 

					// Analyze server result:
					var location = this.responseText.lastIndexOf("####RESULT:");
					if (-1 == location) {
						result.innerHTML = this.responseText; 
					}
					else {
						result.innerHTML = this.responseText.substring(location + "####RESULT:".length); 
					}
				} 
			}; 
			
var cppCode = 
"#include <iostream>                                                         \n" +
"#include <algorithm>                                                        \n" +
"float precision_for(float reference) {                                        " +
"	unsigned long long i = *reinterpret_cast<unsigned long long*>(&reference); " +
"    unsigned long long j = i+1;                                               " +
"    float more = *reinterpret_cast<float*>(&j);                               " +
"	unsigned long long k = i-1;                                                " +
"	float less = *reinterpret_cast<float*>(&k);                                " +
"    float precision = std::max(more - reference, reference - less);           " +
"	return precision;                                                          " +
"}                                                                             " +
"int main () {                                                                 " +
"	float precision = precision_for(static_cast<float>({INPUTVAL}));           " +
"    std::cout << \"####RESULT:\" << std::defaultfloat << precision << std::endl;" +
"    return 1;                                                                 " +
"}\n"

			// Converting JSON data to string 
			var data = JSON.stringify({
    "source": cppCode.replace("{INPUTVAL}", inputVal),
    "compiler": "g82",
    "options": {
        "userArguments": "-O3",
        "executeParameters": {
            "args": ["arg1", "arg2"],
            "stdin": "hello, world!"
        },
        "compilerOptions": {
            "executorRequest": true
        },
        "filters": {
            "execute": true
        },
        "tools": [],
        "libraries": [
            {"id": "openssl", "version": "111c"}
        ]
    },
    "lang": "c++",
    "allowStoreCodeDebug": true
}); 

			// Sending data with the request 
			xhr.send(data); 

            document.getElementById("sendButton").disabled=true;
		} 

</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const labels = [
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
  ];

  const data = {
    labels: labels,
    datasets: [{
      label: 'My First dataset',
      backgroundColor: 'rgb(255, 99, 132)',
      borderColor: 'rgb(255, 99, 132)',
      data: [0, 10, 5, 2, 20, 30, 45],
    }]
  };

  const config = {
    type: 'line',
    data: data,
    options: {}
  };
</script>
<script>
  const myChart = new Chart(
    document.getElementById('myChart'),
    config
  );
</script>

